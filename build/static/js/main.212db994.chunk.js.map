{"version":3,"sources":["components/Icon.js","components/SelectButton.js","components/Loading.js","components/Preview.js","components/FileListControl.js","SVGAdmin.js","serviceWorker.js","index.js"],"names":["Icon","url","this","props","i","styles","w","width","h","height","left","marginLeft","right","marginRight","top","marginTop","style","Object","assign","src","alt","className","Component","SelectButtonElement","styled","button","FileUrlFileName","span","FileUrlFlatName","SelectButton","buttonContent","Fragment","selected","fileUrlArray","split","fileName","length","push","onClick","LoadingMessage","div","Loading","viewBox","d","fill","cx","cy","r","attributeName","type","from","to","dur","repeatCount","PreviewContainer","Preview","onPreviewClick","bind","containerRef","React","createRef","state","isLoading","content","_getFileContent","setState","fetch","path","then","response","text","result","e","groupName","target","closest","id","ref","dangerouslySetInnerHTML","__html","Container","HeaderButton","Header","HeaderTitle","SecondaryTitle","File","FilesList","EmptyFolderMessage","FileListControl","onBackClick","onShowPlanClick","onRefreshClick","titleRef","currentPath","rootPath","files","flats","isPreviewEnabled","currentFile","currentFolder","childrenFolders","_getList","current","scrollTo","behavior","json","directories","currentDirectory","newPath","currentState","parent","changeUrl","replace","onClose","flatName","allFloor","title","onAllFloorClick","selectInPreview","map","flat","flatIndex","key","name","onFlatClick","folders","folder","folderIndex","onFolderClick","file","fileIndex","onFileClick","emptyMessage","secondaryTitle","pathWithoutRoot","slice","join","disabled","SVGAdmin","isFilesListEnabled","selectedUrl","inputSelector","input","document","body","querySelector","value","setFileListEnabledState","onUrlCreated","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","dataset","navigator","serviceWorker","ready","registration","unregister","catch","error","console","message"],"mappings":"2QAEqBA,E,uKAEnB,IAAIC,EAAM,WAAaC,KAAKC,MAAMC,EAAI,OAClCC,EAAS,GA0Bb,OAxBIH,KAAKC,MAAMG,IACdD,EAAOE,MAAQL,KAAKC,MAAMG,GAGvBJ,KAAKC,MAAMK,IACdH,EAAOI,OAASP,KAAKC,MAAMK,GAGxBN,KAAKC,MAAMO,OACdL,EAAOM,WAAaT,KAAKC,MAAMO,MAG5BR,KAAKC,MAAMS,QACdP,EAAOQ,YAAcX,KAAKC,MAAMS,OAG7BV,KAAKC,MAAMW,MACdT,EAAOU,UAAYb,KAAKC,MAAMW,KAG3BZ,KAAKC,MAAMa,QACdX,EAASY,OAAOC,OAAOb,EAAQH,KAAKC,MAAMa,QAGpC,yBAAKG,IAAKlB,EAAKmB,IAAKlB,KAAKC,MAAMiB,KAAO,GAAIC,UAAU,SAASL,MAAOX,Q,GA7B3CiB,a,6tBCElC,IAAMC,EAAsBC,IAAOC,OAAV,KAqBnBC,EAAkBF,IAAOG,KAAV,KAMfC,EAAkBJ,IAAOG,KAAV,KAOAE,E,kDACpB,WAAY1B,GAAQ,uCACbA,G,qDAIN,IAAI2B,EAAgB,kBAAC,IAAMC,SAAP,KAAgB,kBAAC,EAAD,CAAMnB,MAAO,GAAIR,EAAE,QAAnC,4GACpB,GAAIF,KAAKC,MAAM6B,SAAU,CACxB,IAAMC,EAAe/B,KAAKC,MAAM6B,SAASE,MAAM,KACzCC,EAAW,CAAC,kBAACT,EAAD,KAAkBO,EAAa,KAE7CA,EAAaG,QAChBD,EAASE,KAAK,kBAACT,EAAD,KAAkBK,EAAa,KAG9CH,EAAgB,kBAAC,IAAMC,SAAP,KAAgB,kBAAC,EAAD,CAAMnB,MAAO,GAAIR,EAAE,SAAnC,IAA8C+B,GAG/D,OAAO,kBAACZ,EAAD,CAAqBe,QAASpC,KAAKC,MAAMmC,SAC7CR,O,GAnBqCR,a,+PCnC1C,IAAMiB,EAAiBf,IAAOgB,IAAV,KAYL,SAASC,IACvB,OAAO,kBAACF,EAAD,KACN,yBAAKhC,MAAM,OAAOE,OAAO,OAAOiC,QAAQ,eAAc,2BAAG,0BAAMC,EAAE,gFAAgFC,KAAK,YAAW,0BAAMD,EAAE,kFAAkFC,KAAK,YAAW,0BAAMD,EAAE,oIAAoIC,KAAK,YAAW,0BAAMD,EAAE,iFAAiFC,KAAK,YAAW,0BAAMD,EAAE,kIAAkIC,KAAK,YAAW,0BAAMD,EAAE,6EAA6EC,KAAK,YAAW,0BAAMD,EAAE,kIAAkIC,KAAK,YAAW,0BAAMD,EAAE,iIAAiIC,KAAK,YAAW,4BAAQC,GAAG,KAAKC,GAAG,KAAKC,EAAE,SAAQ,sCAAkBC,cAAc,YAAYC,KAAK,SAASC,KAAK,UAAUC,GAAG,aAAaC,IAAI,SAASC,YAAY,iBADhtC,kG,ueCZR,IAAMC,EAAmB9B,IAAOgB,IAAV,KA0BDe,E,kDACpB,WAAYpD,GAAQ,IAAD,8BAClB,cAAMA,IAEDqD,eAAiB,EAAKA,eAAeC,KAApB,gBACtB,EAAKC,aAAeC,IAAMC,YAE1B,EAAKC,MAAQ,CACZC,WAAW,EACXC,QAAS,MARQ,E,gEAalB7D,KAAK8D,oB,oKAIL9D,KAAK+D,SAAS,CACbH,WAAW,I,SAGNI,MAAM,iBAAmBhE,KAAKC,MAAMgE,MACxCC,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UAC1BF,MAAK,SAAAG,GACL,EAAKN,SAAS,CACbH,WAAW,EACXC,QAASQ,O,2IAKEC,GACd,IAAMC,EAAYD,EAAEE,OAAOC,QAAQ,WAE/BF,GAAaA,EAAUG,IAC1B1E,KAAKC,MAAMqD,eAAeiB,EAAUG,M,+BAI5B,IAAD,OACR,GAAI1E,KAAK2D,MAAMC,UACd,OAAO,kBAACrB,EAAD,MASR,OAAO,kBAACa,EAAD,CAAkBuB,IAAK3E,KAAKwD,aAAcoB,wBALzC,CACNC,OAAQ,EAAKlB,MAAME,SAIqEzB,QAASpC,KAAKsD,qB,GAnDrElC,a,wyDCxBrC,IAAM0D,EAAYxD,IAAOgB,IAAV,KAYTyC,EAAezD,IAAOC,OAAV,KAsBZyD,EAAS1D,IAAOgB,IAAV,KAKN2C,EAAc3D,IAAOgB,IAAV,KAWX4C,EAAiB5D,IAAOG,KAAV,KAId0D,EAAO7D,IAAOC,OAAV,KAiBJ6D,EAAY9D,IAAOgB,IAAV,KAQT+C,EAAqB/D,IAAOgB,IAAV,KAOHgD,E,kDACpB,aAAe,IAAD,8BACb,gBAEKC,YAAc,EAAKA,YAAYhC,KAAjB,gBACnB,EAAKiC,gBAAkB,EAAKA,gBAAgBjC,KAArB,gBACvB,EAAKkC,eAAiB,EAAKA,eAAelC,KAApB,gBAEtB,EAAKmC,SAAWjC,IAAMC,YAEtB,EAAKC,MAAQ,CACZgC,YAAa,KACbC,SAAU,KACVC,MAAO,GACPC,MAAO,GACPlC,WAAW,EACXmC,kBAAkB,EAClBC,YAAa,KACbC,cAAe,GACfC,gBAAiB,IAlBL,E,gMAuBUlC,MAAM,YAAYE,MAAK,SAAAC,GAAQ,OAAIA,EAASC,U,OAA7DwB,E,OAEN5F,KAAK+D,SAAS,CACb4B,YAAaC,EACbA,SAAUA,IAGX5F,KAAKmG,SAASP,G,iJAIV5F,KAAK0F,SAASU,SACjBpG,KAAK0F,SAASU,QAAQC,SAAS,CAAE7F,KAAM,OAAQ8F,SAAU,a,wEAI5CrC,G,mFACdjE,KAAK+D,SAAS,CACbH,WAAW,I,SAGUI,MAAM,iBAAmBC,GAC7CC,MAAK,SAAAC,GAAQ,OAAIA,EAASoC,UAC1BrC,MAAK,SAAAG,GACL,EAAKN,SAAS,CACbH,WAAW,EACXiC,MAAOxB,EAAOwB,MACdK,gBAAiB7B,EAAOmC,YACxBP,cAAe5B,EAAOoC,iBACtBd,YAAa1B,O,yJAKHyC,GACb1G,KAAK+D,SAAS,CACb4C,aAAcD,IAGf1G,KAAKmG,SAASO,K,2EAGGzC,G,mFACjBjE,KAAK+D,SAAS,CACbH,WAAW,I,SAGNI,MAAM,kBAAoBC,GAC9BC,MAAK,SAAAC,GAAQ,OAAIA,EAASoC,UAC1BrC,MAAK,SAAAG,GACL,EAAKN,SAAS,CACbH,WAAW,EACXkC,MAAOzB,EACP2B,YAAa/B,O,2IAMXjE,KAAK2D,MAAMqC,YAKZhG,KAAK2D,MAAMoC,iBACd/F,KAAK+D,SAAS,CACbgC,kBAAkB,KAMpB/F,KAAK+D,SAAS,CACbiC,YAAa,KACbF,MAAO,KAGR9F,KAAKmG,SAASnG,KAAK2D,MAAMsC,cAAchC,OAjBtCjE,KAAKmG,SAASnG,KAAK2D,MAAMsC,cAAcW,U,uCAqBnC5G,KAAK2D,MAAMqC,aACfhG,KAAKmG,SAASnG,KAAK2D,MAAMsC,cAAchC,Q,wCAKxCjE,KAAK+D,SAAS,CACbgC,kBAAkB,M,wCAKnB/F,KAAKC,MAAM4G,UAAU7G,KAAK2D,MAAMqC,YAAYc,QAAQ9G,KAAK2D,MAAMiC,SAAU,KACzE5F,KAAKC,MAAM8G,Y,kCAGAC,GACXhH,KAAKC,MAAM4G,UAAU7G,KAAK2D,MAAMqC,YAAYc,QAAQ9G,KAAK2D,MAAMiC,SAAU,IAAM,IAAMoB,GACrFhH,KAAKC,MAAM8G,Y,+BAGF,IAAD,OACJlD,EAAU,KAEd,GAAI7D,KAAK2D,MAAMC,UACdC,EAAU,kBAACtB,EAAD,WACJ,GAAIvC,KAAK2D,MAAMqC,cAAgBhG,KAAK2D,MAAMoC,iBAAkB,CAClE,IAAMkB,EAAW,kBAAC9B,EAAD,CAAM+B,MAAM,+FAAoB9E,QAASpC,KAAKmH,gBAAgB5D,KAAKvD,OAAO,kBAAC,EAAD,CAAME,EAAE,QAAQQ,MAAO,KAAjG,iGAEjB,GAAIV,KAAK2D,MAAMmC,MAAM5D,OAAQ,CAC5B,IAAMkF,EAAkB,kBAACjC,EAAD,CAAM+B,MAAM,yFAAmB9E,QAASpC,KAAKwF,iBAAiB,kBAAC,EAAD,CAAMtF,EAAE,OAAOQ,MAAO,KAApF,2FAExBmD,EAAU,kBAAC,IAAMhC,SAAP,KACPoF,EACAG,EACApH,KAAK2D,MAAMmC,MAAMuB,KAAI,SAACC,EAAMC,GAC7B,OAAO,kBAACpC,EAAD,CAAMqC,IAAKD,EAAWL,MAAOI,EAAKG,KAAMrF,QAAS,EAAKsF,YAAYnE,KAAK,EAAM+D,EAAKG,OAAO,kBAAC,EAAD,CAAMvH,EAAE,OAAOQ,MAAO,KAA/G,IAAuH4G,EAAKG,eAIrI5D,EAAU,kBAAC,IAAMhC,SAAP,KACPoF,EACF,kBAAC5B,EAAD,4EAGI,GAAIrF,KAAK2D,MAAMqC,aAAehG,KAAK2D,MAAMoC,iBAC/ClC,EAAU,kBAAC,EAAD,CAASI,KAAMjE,KAAK2D,MAAMqC,YAAa1C,eAAgBtD,KAAK0H,YAAYnE,KAAKvD,YACjF,CACN,IAAM2H,EAAU3H,KAAK2D,MAAMuC,gBAAgBmB,KAAI,SAACO,EAAQC,GACvD,OAAO,kBAAC1C,EAAD,CAAMqC,IAAKK,EAAaX,MAAOU,EAAOH,KAAMrF,QAAS,EAAK0F,cAAcvE,KAAK,EAAMqE,EAAO3D,OAAO,kBAAC,EAAD,CAAM/D,EAAE,SAASQ,MAAO,KAAzH,IAAiIkH,EAAOH,SAG1I5B,EAAQ7F,KAAK2D,MAAMkC,MAAMwB,KAAI,SAACU,EAAMC,GACzC,OAAO,kBAAC7C,EAAD,CAAMqC,IAAKQ,EAAWd,MAAOa,EAAKN,KAAMrF,QAAS,EAAK6F,YAAY1E,KAAK,EAAMwE,EAAK9D,OAAO,kBAAC,EAAD,CAAM/D,EAAE,OAAOQ,MAAO,KAA/G,IAAuHqH,EAAKN,SAGhIS,EAAe,KACdP,EAAQzF,QAAW2D,EAAM3D,QAAWlC,KAAK2D,MAAMC,YACnDsE,EAAe,kBAAC7C,EAAD,iEAGhBxB,EAAU,kBAAC,IAAMhC,SAAP,KACR8F,EACA9B,EACAqC,GAIH,IAAIhB,EAAQ,4EACRiB,EAAiB,KACrB,GAAInI,KAAK2D,MAAMsC,cAAchC,OAASjE,KAAK2D,MAAMiC,UAAY5F,KAAK2D,MAAMsC,cAAchC,KAAM,CAC3FiD,EAAQlH,KAAK2D,MAAMsC,cAAciB,MAEjC,IAAMkB,EAAkBpI,KAAK2D,MAAMsC,cAAchC,KAAK6C,QAAQ9G,KAAK2D,MAAMiC,SAAU,IAC/EwC,EAAgBlG,SACnBiG,EAAiB,kBAACjD,EAAD,UAAmBkD,EAAgBpG,MAAM,KAAKqG,MAAM,GAAI,GAAGC,KAAK,KAAhE,MASnB,OALItI,KAAK2D,MAAMqC,cACdkB,EAAQlH,KAAK2D,MAAMqC,YAAYhE,MAAM,KAAKqG,OAAO,GACjDF,EAAiB,MAGX,kBAACrD,EAAD,KACN,kBAACE,EAAD,KACC,kBAACD,EAAD,CAAcmC,MAAM,wFAAkB9E,QAASpC,KAAKuF,YAAagD,SAAUvI,KAAK2D,MAAMsC,cAAchC,OAASjE,KAAK2D,MAAMiC,WAAa5F,KAAK2D,MAAMqC,aAAa,kBAAC,EAAD,CAAM9F,EAAE,OAAOU,IAAK,KACjL,kBAACmE,EAAD,CAAcmC,MAAM,wFAAkB9E,QAASpC,KAAKyF,eAAgB8C,SAAUvI,KAAK2D,MAAMoC,kBAAkB,kBAAC,EAAD,CAAM7F,EAAE,aACnH,kBAAC+E,EAAD,CAAaN,IAAK3E,KAAK0F,UAAWyC,EAAiBjB,GACnD,kBAACnC,EAAD,CAAcmC,MAAM,6CAAU9E,QAASpC,KAAKC,MAAM8G,SAAS,kBAAC,EAAD,CAAM7G,EAAE,YAEpE,kBAACkF,EAAD,KACGvB,Q,GArMuCzC,a,sJCvF7C,IAAM0D,EAAYxD,IAAOgB,IAAV,KAMMkG,E,kDACjB,WAAYvI,GAAQ,IAAD,8BACf,cAAMA,IAED0D,MAAQ,CACT8E,oBAAoB,EACpBC,YAAa,MALF,E,gEAUf,GAAI1I,KAAKC,MAAM0I,cAAe,CAC1B,IAAMC,EAAQC,SAASC,KAAKC,cAAc/I,KAAKC,MAAM0I,eAEjDC,EAAMI,OACNhJ,KAAK+D,SAAS,CACV2E,YAAaE,EAAMI,W,8CAMXrF,GACpB3D,KAAK+D,SAAS,CACV0E,mBAAoB9E,M,mCAIf5D,GAKT,GAJAC,KAAK+D,SAAS,CACV2E,YAAa3I,IAGbC,KAAKC,MAAM0I,cAAe,CAC1B,IAAMC,EAAQC,SAASC,KAAKC,cAAc/I,KAAKC,MAAM0I,eAEjDC,IACAA,EAAMI,MAAQjJ,M,+BAMtB,OAAO,kBAAC,EAAD,KACH,kBAAC,EAAD,CAAcqC,QAASpC,KAAKiJ,wBAAwB1F,KAAKvD,MAAM,GAAO8B,SAAU9B,KAAK2D,MAAM+E,cACzF1I,KAAK2D,MAAM8E,mBAAqB,kBAAC,EAAD,CAAiB1B,QAAS/G,KAAKiJ,wBAAwB1F,KAAKvD,MAAM,GAAQ6G,UAAW7G,KAAKkJ,aAAa3F,KAAKvD,QAAY,U,GA7ChIoB,aCClB+H,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCZNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,EAAD,CAAUf,cAAeE,SAASc,eAAe,kBAAkBC,QAAQjB,iBAE7EE,SAASc,eAAe,mBDyHpB,kBAAmBE,WACrBA,UAAUC,cAAcC,MACrB7F,MAAK,SAAA8F,GACJA,EAAaC,gBAEdC,OAAM,SAAAC,GACLC,QAAQD,MAAMA,EAAME,c","file":"static/js/main.212db994.chunk.js","sourcesContent":["import React, { Component } from 'react';\n\nexport default class Icon extends Component {\n\trender() {\n\t\tlet url = './media/' + this.props.i + '.svg';\n\t\tlet styles = {};\n\n\t\tif (this.props.w) {\n\t\t\tstyles.width = this.props.w;\n\t\t}\n\n\t\tif (this.props.h) {\n\t\t\tstyles.height = this.props.h;\n\t\t}\n\n\t\tif (this.props.left) {\n\t\t\tstyles.marginLeft = this.props.left;\n\t\t}\n\n\t\tif (this.props.right) {\n\t\t\tstyles.marginRight = this.props.right;\n\t\t}\n\n\t\tif (this.props.top) {\n\t\t\tstyles.marginTop = this.props.top;\n\t\t}\n\n\t\tif (this.props.style) {\n\t\t\tstyles = Object.assign(styles, this.props.style);\n\t\t}\n\n\t\treturn <img src={url} alt={this.props.alt || ''} className=\"m-icon\" style={styles} />;\n\t}\n}","import React, { Component } from 'react';\nimport Icon from './Icon';\nimport styled from 'styled-components';\n\nconst SelectButtonElement = styled.button`\n\tdisplay: flex;\n\twidth: 100%;\n\talign-items: center;\n\tbackground-color: #fafafa;\n\tborder: none;\n\tpadding: 10px 20px;\n\ttext-align: center;\n\tborder-radius: 8px;\n\tjustify-content: center;\n\tfont-size: 16px;\n\tcursor: pointer;\n\ttransition: background-color 0.15s ease;\n\t&:focus {\n\t\toutline: none;\n\t}\n\t&:hover {\n\t\tbackground-color: #e1e1e1;\n\t}\n`;\n\nconst FileUrlFileName = styled.span`\n\tcolor: #212121;\n\tfont-weight: 700;\n\tfont-size: 14px;\n`;\n\nconst FileUrlFlatName = styled.span`\n\tcolor: gray;\n\tfont-weight: 500;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n`;\n\nexport default class SelectButton extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t}\n\n\trender() {\n\t\tlet buttonContent = <React.Fragment><Icon right={10} i=\"svg\" /> Выбрать планировку</React.Fragment>;\n\t\tif (this.props.selected) {\n\t\t\tconst fileUrlArray = this.props.selected.split('#');\n\t\t\tconst fileName = [<FileUrlFileName>{fileUrlArray[0]}</FileUrlFileName>];\n\n\t\t\tif (fileUrlArray.length) {\n\t\t\t\tfileName.push(<FileUrlFlatName>{fileUrlArray[1]}</FileUrlFlatName>)\n\t\t\t}\n\n\t\t\tbuttonContent = <React.Fragment><Icon right={10} i=\"flat\" /> {fileName}</React.Fragment>;\n\t\t}\n\n\t\treturn <SelectButtonElement onClick={this.props.onClick}>\n\t\t\t{ buttonContent }\n\t\t</SelectButtonElement>\n\t}\n}","import React from 'react';\nimport styled from 'styled-components';\n\nconst LoadingMessage = styled.div`\n\tfont-size: 13px;\n\tcolor: #212121;\n\ttext-align: center;\n\tpadding: 100px 50px;\n\n\tsvg {\n\t\tdisplay: block;\n\t\tmargin: 0 auto 15px auto;\n\t}\n`;\n\nexport default function Loading() {\n\treturn <LoadingMessage>\n\t\t<svg width=\"64px\" height=\"64px\" viewBox=\"0 0 128 128\"><g><path d=\"M64 0L40.08 21.9a10.98 10.98 0 0 0-5.05 8.75C34.37 44.85 64 60.63 64 60.63V0z\" fill=\"#ffb118\"/><path d=\"M128 64l-21.88-23.9a10.97 10.97 0 0 0-8.75-5.05C83.17 34.4 67.4 64 67.4 64H128z\" fill=\"#80c141\"/><path d=\"M63.7 69.73a110.97 110.97 0 0 1-5.04-20.54c-1.16-8.7.68-14.17.68-14.17h38.03s-4.3-.86-14.47 10.1c-3.06 3.3-19.2 24.58-19.2 24.58z\" fill=\"#cadc28\"/><path d=\"M64 128l23.9-21.88a10.97 10.97 0 0 0 5.05-8.75C93.6 83.17 64 67.4 64 67.4V128z\" fill=\"#cf171f\"/><path d=\"M58.27 63.7a110.97 110.97 0 0 1 20.54-5.04c8.7-1.16 14.17.68 14.17.68v38.03s.86-4.3-10.1-14.47c-3.3-3.06-24.58-19.2-24.58-19.2z\" fill=\"#ec1b21\"/><path d=\"M0 64l21.88 23.9a10.97 10.97 0 0 0 8.75 5.05C44.83 93.6 60.6 64 60.6 64H0z\" fill=\"#018ed5\"/><path d=\"M64.3 58.27a110.97 110.97 0 0 1 5.04 20.54c1.16 8.7-.68 14.17-.68 14.17H30.63s4.3.86 14.47-10.1c3.06-3.3 19.2-24.58 19.2-24.58z\" fill=\"#00bbf2\"/><path d=\"M69.73 64.34a111.02 111.02 0 0 1-20.55 5.05c-8.7 1.14-14.15-.7-14.15-.7V30.65s-.86 4.3 10.1 14.5c3.3 3.05 24.6 19.2 24.6 19.2z\" fill=\"#f8f400\"/><circle cx=\"64\" cy=\"64\" r=\"2.03\"/><animateTransform attributeName=\"transform\" type=\"rotate\" from=\"0 64 64\" to=\"-360 64 64\" dur=\"2700ms\" repeatCount=\"indefinite\"></animateTransform></g></svg>\n\t\tПолучение данных...\n\t</LoadingMessage>\n}","import React, { Component } from 'react';\nimport styled from 'styled-components';\nimport Loading from './Loading';\n\nconst PreviewContainer = styled.div`\n\twidth: 100% !important;\n\theight: auto !important;\n\n\tsvg {\n\t\twidth: 100% !important;\n\t\theight: 100% !important;\n\t\tdisplay: block;\n\t\tmargin: 0 auto 15px auto;\n\n\t\t> * {\n\t\t\topacity: 0.5;\n\t\t\tpointer-events: none;\n\t\t}\n\n\t\t> g:not([data-element-type]) {\n\t\t\tpointer-events: visible;\n\t\t\ttransition: opacity 0.3s ease;\n\n\t\t\t&:hover {\n\t\t\t\topacity: 1;\n\t\t\t}\n\t\t}\n\t}\n`;\n\nexport default class Preview extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.onPreviewClick = this.onPreviewClick.bind(this);\n\t\tthis.containerRef = React.createRef();\n\n\t\tthis.state = {\n\t\t\tisLoading: true,\n\t\t\tcontent: null\n\t\t}\n\t}\n\n\tcomponentDidMount() {\n\t\tthis._getFileContent();\n\t}\n\n\tasync _getFileContent() {\n\t\tthis.setState({\n\t\t\tisLoading: true\n\t\t});\n\n\t\tawait fetch('/fs/read?path=' + this.props.path)\n\t\t\t.then(response => response.text())\n\t\t\t.then(result => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tisLoading: false,\n\t\t\t\t\tcontent: result\n\t\t\t\t})\n\t\t\t});\n\t}\n\n\tonPreviewClick(e) {\n\t\tconst groupName = e.target.closest('svg > g');\n\n\t\tif (groupName && groupName.id) {\n\t\t\tthis.props.onPreviewClick(groupName.id);\n\t\t}\n\t}\n\n\trender() {\n\t\tif (this.state.isLoading) {\n\t\t\treturn <Loading />;\n\t\t}\n\n\t\tconst createMarkup = () => {\n\t\t\treturn {\n\t\t\t\t__html: this.state.content\n\t\t\t};\n\t\t};\n\n\t\treturn <PreviewContainer ref={this.containerRef} dangerouslySetInnerHTML={createMarkup()} onClick={this.onPreviewClick}></PreviewContainer>;\n\t}\n}","import React, { Component } from 'react';\nimport Icon from './Icon';\nimport Loading from './Loading';\nimport Preview from './Preview';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: auto;\n\tbackground-color: white;\n\tbox-shadow: 0 6px 18px 0 rgba(14,21,47,.13), 0 -2px 6px rgba(14,21,47,.03);\n\tborder-radius: 8px;\n\tz-index: 1000;\n`;\n\nconst HeaderButton = styled.button`\n\tdisplay: inline-flex;\n\tbackground-color: transparent;\n\tcursor: pointer;\n\tborder: none;\n\tpadding: 12px;\n\topacity: 0.8;\n\talign-items: center;\n\theight: 44px;\n\t&:focus {\n\t\toutline: none;\n\t}\n\t&:hover {\n\t\topacity: 1;\n\t}\n\n\t&:disabled {\n\t\tcursor: default;\n\t\topacity: 0.4;\n\t}\n`;\n\nconst Header = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n`;\n\nconst HeaderTitle = styled.div`\n\tfont-weight: bold;\n\tfont-size: 18px;\n\tpadding: 8px 12px;\n\tflex: 1;\n\tuser-select: none;\n\ttext-align: center;\n\twhite-space: nowrap;\n\toverflow-x: hidden;\n`;\n\nconst SecondaryTitle = styled.span`\n\tcolor: gray;\n`;\n\nconst File = styled.button`\n\tdisplay: inline-flex;\n\tpadding: 8px 12px;\n\talign-items: center;\n\tbackground-color: transparent;\n\tborder: none;\n\ttransition: background-color 0.15s ease;\n\n\t&:nth-child(even) {\n\t\tbackground-color: #fafafa;\n\t}\n\t&:focus, &:hover {\n\t\toutline: none;\n\t\tbackground-color: #D0E8FC;\n\t}\n`;\n\nconst FilesList = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin: 15px 5px;\n\tmax-height: 500px;\n\toverflow-y: auto;\n`;\n\nconst EmptyFolderMessage = styled.div`\n\tfont-size: 13px;\n\tcolor: #212121;\n\ttext-align: center;\n\tpadding: 100px 50px;\n`;\n\nexport default class FileListControl extends Component {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.onBackClick = this.onBackClick.bind(this);\n\t\tthis.onShowPlanClick = this.onShowPlanClick.bind(this);\n\t\tthis.onRefreshClick = this.onRefreshClick.bind(this);\n\n\t\tthis.titleRef = React.createRef();\n\n\t\tthis.state = {\n\t\t\tcurrentPath: null,\n\t\t\trootPath: null,\n\t\t\tfiles: [],\n\t\t\tflats: [],\n\t\t\tisLoading: false,\n\t\t\tisPreviewEnabled: false,\n\t\t\tcurrentFile: null,\n\t\t\tcurrentFolder: {},\n\t\t\tchildrenFolders: []\n\t\t}\n\t}\n\n\tasync componentDidMount() {\n\t\tconst rootPath = await fetch('/fs/root').then(response => response.text());\n\n\t\tthis.setState({\n\t\t\tcurrentPath: rootPath,\n\t\t\trootPath: rootPath\n\t\t});\n\n\t\tthis._getList(rootPath)\n\t}\n\n\tcomponentDidUpdate() {\n\t\tif (this.titleRef.current) {\n\t\t\tthis.titleRef.current.scrollTo({ left: 999999, behavior: \"smooth\" });\n\t\t}\n\t}\n\n\tasync _getList(path) {\n\t\tthis.setState({\n\t\t\tisLoading: true\n\t\t});\n\n\t\tconst promise = await fetch('/fs/list?path=' + path)\n\t\t\t.then(response => response.json())\n\t\t\t.then(result => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tisLoading: false,\n\t\t\t\t\tfiles: result.files,\n\t\t\t\t\tchildrenFolders: result.directories,\n\t\t\t\t\tcurrentFolder: result.currentDirectory,\n\t\t\t\t\tcurrentPath: path\n\t\t\t\t})\n\t\t\t});\n\t}\n\n\tonFolderClick(newPath) {\n\t\tthis.setState({\n\t\t\tcurrentState: newPath\n\t\t});\n\n\t\tthis._getList(newPath);\n\t}\n\n\tasync onFileClick(path) {\n\t\tthis.setState({\n\t\t\tisLoading: true\n\t\t});\n\n\t\tawait fetch('/fs/flats?path=' + path)\n\t\t\t.then(response => response.json())\n\t\t\t.then(result => {\n\t\t\t\tthis.setState({\n\t\t\t\t\tisLoading: false,\n\t\t\t\t\tflats: result,\n\t\t\t\t\tcurrentFile: path\n\t\t\t\t})\n\t\t\t});\n\t}\n\n\tonBackClick() {\n\t\tif (!this.state.currentFile) {\n\t\t\tthis._getList(this.state.currentFolder.parent);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.state.isPreviewEnabled) {\n\t\t\tthis.setState({\n\t\t\t\tisPreviewEnabled: false\n\t\t\t})\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState({\n\t\t\tcurrentFile: null,\n\t\t\tflats: []\n\t\t});\n\n\t\tthis._getList(this.state.currentFolder.path);\n\t}\n\n\tonRefreshClick() {\n\t\tif (!this.state.currentFile) {\n\t\t\tthis._getList(this.state.currentFolder.path);\n\t\t}\n\t}\n\n\tonShowPlanClick() {\n\t\tthis.setState({\n\t\t\tisPreviewEnabled: true\n\t\t});\n\t}\n\n\tonAllFloorClick() {\n\t\tthis.props.changeUrl(this.state.currentFile.replace(this.state.rootPath, ''));\n\t\tthis.props.onClose();\n\t}\n\n\tonFlatClick(flatName) {\n\t\tthis.props.changeUrl(this.state.currentFile.replace(this.state.rootPath, '') + '#' + flatName);\n\t\tthis.props.onClose();\n\t}\n\n\trender() {\n\t\tlet content = null;\n\n\t\tif (this.state.isLoading) {\n\t\t\tcontent = <Loading />;\n\t\t} else if (this.state.currentFile && !this.state.isPreviewEnabled) {\n\t\t\tconst allFloor = <File title=\"Выбрать весь этаж\" onClick={this.onAllFloorClick.bind(this)}><Icon i=\"floor\" right={10} /> Выбрать весь этаж</File>;\n\n\t\t\tif (this.state.flats.length) {\n\t\t\t\tconst selectInPreview = <File title=\"Выбрать на плане\" onClick={this.onShowPlanClick}><Icon i=\"plan\" right={10} /> Выбрать на плане</File>;\n\n\t\t\t\tcontent = <React.Fragment>\n\t\t\t\t\t{ allFloor }\n\t\t\t\t\t{ selectInPreview }\n\t\t\t\t\t{ this.state.flats.map((flat, flatIndex) => {\n\t\t\t\t\t\treturn <File key={flatIndex} title={flat.name} onClick={this.onFlatClick.bind(this, flat.name)}><Icon i=\"flat\" right={10} /> {flat.name}</File>\n\t\t\t\t\t})}\n\t\t\t\t</React.Fragment>\n\t\t\t} else {\n\t\t\t\tcontent = <React.Fragment>\n\t\t\t\t\t{ allFloor }\n\t\t\t\t\t<EmptyFolderMessage>Нет квартир</EmptyFolderMessage>\n\t\t\t\t</React.Fragment>\n\t\t\t}\n\t\t} else if (this.state.currentFile && this.state.isPreviewEnabled) {\n\t\t\tcontent = <Preview path={this.state.currentFile} onPreviewClick={this.onFlatClick.bind(this)} />\n\t\t} else {\n\t\t\tconst folders = this.state.childrenFolders.map((folder, folderIndex) => {\n\t\t\t\treturn <File key={folderIndex} title={folder.name} onClick={this.onFolderClick.bind(this, folder.path)}><Icon i=\"folder\" right={10} /> {folder.name}</File>;\n\t\t\t});\n\n\t\t\tconst files = this.state.files.map((file, fileIndex) => {\n\t\t\t\treturn <File key={fileIndex} title={file.name} onClick={this.onFileClick.bind(this, file.path)}><Icon i=\"file\" right={10} /> {file.name}</File>;\n\t\t\t});\n\n\t\t\tlet emptyMessage = null;\n\t\t\tif (!folders.length && !files.length && !this.state.isLoading) {\n\t\t\t\temptyMessage = <EmptyFolderMessage>Нет файлов</EmptyFolderMessage>\n\t\t\t}\n\n\t\t\tcontent = <React.Fragment>\n\t\t\t\t{folders}\n\t\t\t\t{files}\n\t\t\t\t{emptyMessage}\n\t\t\t</React.Fragment>\n\t\t}\n\n\t\tlet title = 'Выберите файл';\n\t\tlet secondaryTitle = null;\n\t\tif (this.state.currentFolder.path !== this.state.rootPath && this.state.currentFolder.path) {\n\t\t\ttitle = this.state.currentFolder.title;\n\n\t\t\tconst pathWithoutRoot = this.state.currentFolder.path.replace(this.state.rootPath, '');\n\t\t\tif (pathWithoutRoot.length) {\n\t\t\t\tsecondaryTitle = <SecondaryTitle>..{pathWithoutRoot.split('/').slice(0, -1).join('/')}/</SecondaryTitle>;\n\t\t\t}\n\t\t}\n\n\t\tif (this.state.currentFile) {\n\t\t\ttitle = this.state.currentFile.split('/').slice(-1);\n\t\t\tsecondaryTitle = null;\n\t\t}\n\n\t\treturn <Container>\n\t\t\t<Header>\n\t\t\t\t<HeaderButton title=\"Вернуться назад\" onClick={this.onBackClick} disabled={this.state.currentFolder.path === this.state.rootPath && !this.state.currentFile}><Icon i=\"back\" top={4} /></HeaderButton>\n\t\t\t\t<HeaderButton title=\"Обновить список\" onClick={this.onRefreshClick} disabled={this.state.isPreviewEnabled}><Icon i=\"refresh\" /></HeaderButton>\n\t\t\t\t<HeaderTitle ref={this.titleRef}>{secondaryTitle}{ title }</HeaderTitle>\n\t\t\t\t<HeaderButton title=\"Закрыть\" onClick={this.props.onClose}><Icon i=\"close\" /></HeaderButton>\n\t\t\t</Header>\n\t\t\t<FilesList>\n\t\t\t\t{ content }\n\t\t\t</FilesList>\n\t\t</Container>;\n\t}\n}","import React, { Component } from 'react';\nimport SelectButton from './components/SelectButton';\nimport FileListControl from './components/FileListControl';\nimport styled from 'styled-components';\n\nconst Container = styled.div`\n    position: relative;\n\twidth: 600px;\n\tfont-family: PT Sans, sans-serif;\n`;\n\nexport default class SVGAdmin extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isFilesListEnabled: false,\n            selectedUrl: null\n        }\n    }\n\n    componentDidMount() {\n        if (this.props.inputSelector) {\n            const input = document.body.querySelector(this.props.inputSelector);\n\n            if (input.value) {\n                this.setState({\n                    selectedUrl: input.value\n                })\n            }\n        }\n    }\n\n    setFileListEnabledState(state) {\n        this.setState({\n            isFilesListEnabled: state\n        });\n    }\n\n    onUrlCreated(url) {\n        this.setState({\n            selectedUrl: url\n        });\n\n        if (this.props.inputSelector) {\n            const input = document.body.querySelector(this.props.inputSelector);\n\n            if (input) {\n                input.value = url;\n            }\n        }\n    }\n\n    render() {\n        return <Container>\n            <SelectButton onClick={this.setFileListEnabledState.bind(this, true)} selected={this.state.selectedUrl} />\n            { this.state.isFilesListEnabled ? <FileListControl onClose={this.setFileListEnabledState.bind(this, false)} changeUrl={this.onUrlCreated.bind(this)} /> : null}\n        </Container>\n    }\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport SVGAdmin from './SVGAdmin';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <SVGAdmin inputSelector={document.getElementById('svg-admin-list').dataset.inputSelector} />\n  </React.StrictMode>,\n  document.getElementById('svg-admin-list')\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}