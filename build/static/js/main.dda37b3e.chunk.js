(this["webpackJsonpsvg-admin-plugin"]=this["webpackJsonpsvg-admin-plugin"]||[]).push([[0],{18:function(t,e,n){t.exports=n(27)},23:function(t,e,n){},27:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(14),l=n.n(i),o=(n(23),n(3)),s=n(4),c=n(6),u=n(5),h=n(1),p=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(){return Object(o.a)(this,n),e.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var t="./media/"+this.props.i+".svg",e={};return this.props.w&&(e.width=this.props.w),this.props.h&&(e.height=this.props.h),this.props.left&&(e.marginLeft=this.props.left),this.props.right&&(e.marginRight=this.props.right),this.props.top&&(e.marginTop=this.props.top),this.props.style&&(e=Object.assign(e,this.props.style)),r.a.createElement("img",{src:t,alt:this.props.alt||"",className:"m-icon",style:e})}}]),n}(a.Component),f=n(2);function d(){var t=Object(h.a)(["\n\tcolor: gray;\n\tfont-weight: 500;\n\tfont-size: 14px;\n\tmargin-left: 10px;\n"]);return d=function(){return t},t}function m(){var t=Object(h.a)(["\n\tcolor: #212121;\n\tfont-weight: 700;\n\tfont-size: 14px;\n"]);return m=function(){return t},t}function v(){var t=Object(h.a)(["\n\tdisplay: flex;\n\twidth: 100%;\n\talign-items: center;\n\tbackground-color: #fafafa;\n\tborder: none;\n\tpadding: 10px 20px;\n\ttext-align: center;\n\tborder-radius: 8px;\n\tjustify-content: center;\n\tfont-size: 16px;\n\tcursor: pointer;\n\ttransition: background-color 0.15s ease;\n\t&:focus {\n\t\toutline: none;\n\t}\n\t&:hover {\n\t\tbackground-color: #e1e1e1;\n\t}\n"]);return v=function(){return t},t}var b=f.a.button(v()),g=f.a.span(m()),k=f.a.span(d()),E=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(t){return Object(o.a)(this,n),e.call(this,t)}return Object(s.a)(n,[{key:"render",value:function(){var t=r.a.createElement(r.a.Fragment,null,r.a.createElement(p,{right:10,i:"svg"})," \u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u043a\u0443");if(this.props.selected){var e=this.props.selected.split("#"),n=[r.a.createElement(g,null,e[0])];e.length&&n.push(r.a.createElement(k,null,e[1])),t=r.a.createElement(r.a.Fragment,null,r.a.createElement(p,{right:10,i:"flat"})," ",n)}return r.a.createElement(b,{onClick:this.props.onClick},t)}}]),n}(a.Component),x=n(7),y=n.n(x),C=n(9),F=n(8);function j(){var t=Object(h.a)(["\n\tfont-size: 13px;\n\tcolor: #212121;\n\ttext-align: center;\n\tpadding: 100px 50px;\n\n\tsvg {\n\t\tdisplay: block;\n\t\tmargin: 0 auto 15px auto;\n\t}\n"]);return j=function(){return t},t}var w=f.a.div(j());function O(){return r.a.createElement(w,null,r.a.createElement("svg",{width:"64px",height:"64px",viewBox:"0 0 128 128"},r.a.createElement("g",null,r.a.createElement("path",{d:"M64 0L40.08 21.9a10.98 10.98 0 0 0-5.05 8.75C34.37 44.85 64 60.63 64 60.63V0z",fill:"#ffb118"}),r.a.createElement("path",{d:"M128 64l-21.88-23.9a10.97 10.97 0 0 0-8.75-5.05C83.17 34.4 67.4 64 67.4 64H128z",fill:"#80c141"}),r.a.createElement("path",{d:"M63.7 69.73a110.97 110.97 0 0 1-5.04-20.54c-1.16-8.7.68-14.17.68-14.17h38.03s-4.3-.86-14.47 10.1c-3.06 3.3-19.2 24.58-19.2 24.58z",fill:"#cadc28"}),r.a.createElement("path",{d:"M64 128l23.9-21.88a10.97 10.97 0 0 0 5.05-8.75C93.6 83.17 64 67.4 64 67.4V128z",fill:"#cf171f"}),r.a.createElement("path",{d:"M58.27 63.7a110.97 110.97 0 0 1 20.54-5.04c8.7-1.16 14.17.68 14.17.68v38.03s.86-4.3-10.1-14.47c-3.3-3.06-24.58-19.2-24.58-19.2z",fill:"#ec1b21"}),r.a.createElement("path",{d:"M0 64l21.88 23.9a10.97 10.97 0 0 0 8.75 5.05C44.83 93.6 60.6 64 60.6 64H0z",fill:"#018ed5"}),r.a.createElement("path",{d:"M64.3 58.27a110.97 110.97 0 0 1 5.04 20.54c1.16 8.7-.68 14.17-.68 14.17H30.63s4.3.86 14.47-10.1c3.06-3.3 19.2-24.58 19.2-24.58z",fill:"#00bbf2"}),r.a.createElement("path",{d:"M69.73 64.34a111.02 111.02 0 0 1-20.55 5.05c-8.7 1.14-14.15-.7-14.15-.7V30.65s-.86 4.3 10.1 14.5c3.3 3.05 24.6 19.2 24.6 19.2z",fill:"#f8f400"}),r.a.createElement("circle",{cx:"64",cy:"64",r:"2.03"}),r.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 64 64",to:"-360 64 64",dur:"2700ms",repeatCount:"indefinite"}))),"\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0445...")}function S(){var t=Object(h.a)(["\n\twidth: 100% !important;\n\theight: auto !important;\n\n\tsvg {\n\t\twidth: 100% !important;\n\t\theight: 100% !important;\n\t\tdisplay: block;\n\t\tmargin: 0 auto 15px auto;\n\n\t\t> * {\n\t\t\topacity: 0.5;\n\t\t\tpointer-events: none;\n\t\t}\n\n\t\t> g:not([data-element-type]) {\n\t\t\tpointer-events: visible;\n\t\t\ttransition: opacity 0.3s ease;\n\n\t\t\t&:hover {\n\t\t\t\topacity: 1;\n\t\t\t}\n\t\t}\n\t}\n"]);return S=function(){return t},t}var P=f.a.div(S()),L=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).onPreviewClick=a.onPreviewClick.bind(Object(F.a)(a)),a.containerRef=r.a.createRef(),a.state={isLoading:!0,content:null},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this._getFileContent()}},{key:"_getFileContent",value:function(){var t=Object(C.a)(y.a.mark((function t(){var e=this;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({isLoading:!0}),t.next=3,fetch("/fs/read?path="+this.props.path).then((function(t){return t.text()})).then((function(t){e.setState({isLoading:!1,content:t})}));case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"onPreviewClick",value:function(t){var e=t.target.closest("svg > g");e&&e.id&&this.props.onPreviewClick(e.id)}},{key:"render",value:function(){var t=this;if(this.state.isLoading)return r.a.createElement(O,null);return r.a.createElement(P,{ref:this.containerRef,dangerouslySetInnerHTML:{__html:t.state.content},onClick:this.onPreviewClick})}}]),n}(a.Component);function z(){var t=Object(h.a)(["\n\tfont-size: 13px;\n\tcolor: #212121;\n\ttext-align: center;\n\tpadding: 100px 50px;\n"]);return z=function(){return t},t}function M(){var t=Object(h.a)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\tmargin: 15px 5px;\n\tmax-height: 500px;\n\toverflow-y: auto;\n"]);return M=function(){return t},t}function R(){var t=Object(h.a)(["\n\tdisplay: inline-flex;\n\tpadding: 8px 12px;\n\talign-items: center;\n\tbackground-color: transparent;\n\tborder: none;\n\ttransition: background-color 0.15s ease;\n\n\t&:nth-child(even) {\n\t\tbackground-color: #fafafa;\n\t}\n\t&:focus, &:hover {\n\t\toutline: none;\n\t\tbackground-color: #D0E8FC;\n\t}\n"]);return R=function(){return t},t}function U(){var t=Object(h.a)(["\n\tcolor: gray;\n"]);return U=function(){return t},t}function _(){var t=Object(h.a)(["\n\tfont-weight: bold;\n\tfont-size: 18px;\n\tpadding: 8px 12px;\n\tflex: 1;\n\tuser-select: none;\n\ttext-align: center;\n\twhite-space: nowrap;\n\toverflow-x: hidden;\n"]);return _=function(){return t},t}function B(){var t=Object(h.a)(["\n\tdisplay: flex;\n\talign-items: center;\n"]);return B=function(){return t},t}function D(){var t=Object(h.a)(["\n\tdisplay: inline-flex;\n\tbackground-color: transparent;\n\tcursor: pointer;\n\tborder: none;\n\tpadding: 12px;\n\topacity: 0.8;\n\talign-items: center;\n\theight: 44px;\n\t&:focus {\n\t\toutline: none;\n\t}\n\t&:hover {\n\t\topacity: 1;\n\t}\n\n\t&:disabled {\n\t\tcursor: default;\n\t\topacity: 0.4;\n\t}\n"]);return D=function(){return t},t}function T(){var t=Object(h.a)(["\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: auto;\n\tbackground-color: white;\n\tbox-shadow: 0 6px 18px 0 rgba(14,21,47,.13), 0 -2px 6px rgba(14,21,47,.03);\n\tborder-radius: 8px;\n\tz-index: 1000;\n"]);return T=function(){return t},t}var H=f.a.div(T()),I=f.a.button(D()),V=f.a.div(B()),q=f.a.div(_()),A=f.a.span(U()),J=f.a.button(R()),N=f.a.div(M()),G=f.a.div(z()),K=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(){var t;return Object(o.a)(this,n),(t=e.call(this)).onBackClick=t.onBackClick.bind(Object(F.a)(t)),t.onShowPlanClick=t.onShowPlanClick.bind(Object(F.a)(t)),t.onRefreshClick=t.onRefreshClick.bind(Object(F.a)(t)),t.titleRef=r.a.createRef(),t.state={currentPath:null,rootPath:null,files:[],flats:[],isLoading:!1,isPreviewEnabled:!1,currentFile:null,currentFolder:{},childrenFolders:[]},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=Object(C.a)(y.a.mark((function t(){var e;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/fs/root").then((function(t){return t.text()}));case 2:e=t.sent,this.setState({currentPath:e,rootPath:e}),this._getList(e);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.titleRef.current&&this.titleRef.current.scrollTo({left:999999,behavior:"smooth"})}},{key:"_getList",value:function(){var t=Object(C.a)(y.a.mark((function t(e){var n=this;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({isLoading:!0}),t.next=3,fetch("/fs/list?path="+e).then((function(t){return t.json()})).then((function(t){n.setState({isLoading:!1,files:t.files,childrenFolders:t.directories,currentFolder:t.currentDirectory,currentPath:e})}));case 3:t.sent;case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onFolderClick",value:function(t){this.setState({currentState:t}),this._getList(t)}},{key:"onFileClick",value:function(){var t=Object(C.a)(y.a.mark((function t(e){var n=this;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({isLoading:!0}),t.next=3,fetch("/fs/flats?path="+e).then((function(t){return t.json()})).then((function(t){n.setState({isLoading:!1,flats:t,currentFile:e})}));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"onBackClick",value:function(){this.state.currentFile?this.state.isPreviewEnabled?this.setState({isPreviewEnabled:!1}):(this.setState({currentFile:null,flats:[]}),this._getList(this.state.currentFolder.path)):this._getList(this.state.currentFolder.parent)}},{key:"onRefreshClick",value:function(){this.state.currentFile||this._getList(this.state.currentFolder.path)}},{key:"onShowPlanClick",value:function(){this.setState({isPreviewEnabled:!0})}},{key:"onAllFloorClick",value:function(){this.props.changeUrl(this.state.currentFile.replace(this.state.rootPath,"")),this.props.onClose()}},{key:"onFlatClick",value:function(t){this.props.changeUrl(this.state.currentFile.replace(this.state.rootPath,"")+"#"+t),this.props.onClose()}},{key:"render",value:function(){var t=this,e=null;if(this.state.isLoading)e=r.a.createElement(O,null);else if(this.state.currentFile&&!this.state.isPreviewEnabled){var n=r.a.createElement(J,{title:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0435\u0441\u044c \u044d\u0442\u0430\u0436",onClick:this.onAllFloorClick.bind(this)},r.a.createElement(p,{i:"floor",right:10})," \u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0432\u0435\u0441\u044c \u044d\u0442\u0430\u0436");if(this.state.flats.length){var a=r.a.createElement(J,{title:"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043d\u0430 \u043f\u043b\u0430\u043d\u0435",onClick:this.onShowPlanClick},r.a.createElement(p,{i:"plan",right:10})," \u0412\u044b\u0431\u0440\u0430\u0442\u044c \u043d\u0430 \u043f\u043b\u0430\u043d\u0435");e=r.a.createElement(r.a.Fragment,null,n,a,this.state.flats.map((function(e,n){return r.a.createElement(J,{key:n,title:e.name,onClick:t.onFlatClick.bind(t,e.name)},r.a.createElement(p,{i:"flat",right:10})," ",e.name)})))}else e=r.a.createElement(r.a.Fragment,null,n,r.a.createElement(G,null,"\u041d\u0435\u0442 \u043a\u0432\u0430\u0440\u0442\u0438\u0440"))}else if(this.state.currentFile&&this.state.isPreviewEnabled)e=r.a.createElement(L,{path:this.state.currentFile,onPreviewClick:this.onFlatClick.bind(this)});else{var i=this.state.childrenFolders.map((function(e,n){return r.a.createElement(J,{key:n,title:e.name,onClick:t.onFolderClick.bind(t,e.path)},r.a.createElement(p,{i:"folder",right:10})," ",e.name)})),l=this.state.files.map((function(e,n){return r.a.createElement(J,{key:n,title:e.name,onClick:t.onFileClick.bind(t,e.path)},r.a.createElement(p,{i:"file",right:10})," ",e.name)})),o=null;i.length||l.length||this.state.isLoading||(o=r.a.createElement(G,null,"\u041d\u0435\u0442 \u0444\u0430\u0439\u043b\u043e\u0432")),e=r.a.createElement(r.a.Fragment,null,i,l,o)}var s="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b",c=null;if(this.state.currentFolder.path!==this.state.rootPath&&this.state.currentFolder.path){s=this.state.currentFolder.title;var u=this.state.currentFolder.path.replace(this.state.rootPath,"");u.length&&(c=r.a.createElement(A,null,"..",u.split("/").slice(0,-1).join("/"),"/"))}return this.state.currentFile&&(s=this.state.currentFile.split("/").slice(-1),c=null),r.a.createElement(H,null,r.a.createElement(V,null,r.a.createElement(I,{title:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043d\u0430\u0437\u0430\u0434",onClick:this.onBackClick,disabled:this.state.currentFolder.path===this.state.rootPath&&!this.state.currentFile},r.a.createElement(p,{i:"back",top:4})),r.a.createElement(I,{title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a",onClick:this.onRefreshClick,disabled:this.state.isPreviewEnabled},r.a.createElement(p,{i:"refresh"})),r.a.createElement(q,{ref:this.titleRef},c,s),r.a.createElement(I,{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:this.props.onClose},r.a.createElement(p,{i:"close"}))),r.a.createElement(N,null,e))}}]),n}(a.Component);function Q(){var t=Object(h.a)(["\n    position: relative;\n\twidth: 600px;\n\tfont-family: PT Sans, sans-serif;\n"]);return Q=function(){return t},t}var W=f.a.div(Q()),X=function(t){Object(c.a)(n,t);var e=Object(u.a)(n);function n(t){var a;return Object(o.a)(this,n),(a=e.call(this,t)).state={isFilesListEnabled:!1,selectedUrl:null},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){if(this.props.inputSelector){var t=document.body.querySelector(this.props.inputSelector);t.value&&this.setState({selectedUrl:t.value})}}},{key:"setFileListEnabledState",value:function(t){this.setState({isFilesListEnabled:t})}},{key:"onUrlCreated",value:function(t){if(this.setState({selectedUrl:t}),this.props.inputSelector){var e=document.body.querySelector(this.props.inputSelector);e&&(e.value=t)}}},{key:"render",value:function(){return r.a.createElement(W,null,r.a.createElement(E,{onClick:this.setFileListEnabledState.bind(this,!0),selected:this.state.selectedUrl}),this.state.isFilesListEnabled?r.a.createElement(K,{onClose:this.setFileListEnabledState.bind(this,!1),changeUrl:this.onUrlCreated.bind(this)}):null)}}]),n}(a.Component);l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(X,{inputSelector:document.getElementById("svg-admin-list").dataset.inputSelector})),document.getElementById("svg-admin-list"))}},[[18,1,2]]]);
//# sourceMappingURL=main.dda37b3e.chunk.js.map